(window.webpackJsonptest=window.webpackJsonptest||[]).push([[0],{51:function(e,t,a){e.exports=a.p+"static/media/loader.0b7095f5.gif"},62:function(e,t,a){e.exports=a(82)},67:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=(a(67),a(10)),i=a(32),s=a(21),l=a(15),u=a(27),p=a(28),m=a(31),E=a(17),O=a(12),f=a(51),d=a.n(f),b=(a(72),function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("img",{className:"image",src:d.a,title:"Loading",alt:"Loading"}))}),h=a(30),_={FETCH_BOOKS_LIST_START:"FETCH_BOOKS_LIST_START",FETCH_BOOKS_LIST_SUCCESS:"FETCH_BOOKS_LIST_SUCCESS",FETCH_BOOKS_LIST_ERROR:"FETCH_BOOKS_LIST_ERROR",SET_FAVORITES_LIST:"SET_FAVORITES_LIST",SET_CURRENT_OPENED_BOOK:"SET_CURRENT_OPENED_BOOK",FETCH_AUTHOR_LIST_START:"FETCH_AUTHOR_LIST_START",FETCH_AUTHOR_LIST_SUCCESS:"FETCH_AUTHOR_LIST_SUCCESS",FETCH_AUTHOR_LIST_ERROR:"FETCH_AUTHOR_LIST_ERROR",SET_CURRENT_OPENED_AUTHOR:"SET_CURRENT_OPENED_AUTHOR",EXPAND_AUTHOR_MENU:"EXPAND_AUTHOR_MENU",CLOSE_AUTHOR_MENU:"CLOSE_AUTHOR_MENU"},T="https://kreo-book-app-api.herokuapp.com";function v(){return function(e){return e({type:_.FETCH_BOOKS_LIST_START}),fetch("".concat(T,"/api/books-list")).then(function(e){return e.json()}).then(function(t){if(t.success){var a=JSON.parse(localStorage.getItem("saved-favorites")||"[]");return e({type:_.FETCH_BOOKS_LIST_SUCCESS,payload:{items:t.data,favorites:a}}),t.data}throw t.error}).catch(function(t){console.warn(t),e({type:_.FETCH_BOOKS_LIST_ERROR})})}}function S(e){return function(t,a){localStorage.getItem("saved-favorites");var n=a().books.favorites;n.includes(e)?(n=n.filter(function(t){return t!==e}),t({type:_.SET_FAVORITES_LIST,payload:n})):(n=[].concat(Object(h.a)(n),[e]),t({type:_.SET_FAVORITES_LIST,payload:n})),localStorage.setItem("saved-favorites",JSON.stringify(n))}}function y(e){return function(t,a){var n=a().books.items.find(function(t){return t.id===parseInt(e)});n?t({type:_.SET_CURRENT_OPENED_BOOK,payload:n}):v()(t).then(function(){var r=a().books.items;n=r.find(function(t){return t.id===parseInt(e)}),t({type:_.SET_CURRENT_OPENED_BOOK,payload:n})})}}var N=a(104),R=a(105),k=a(101),g=a(102),C=a(103);a(73);var j=Object(E.b)(null,function(e){return Object(O.b)({handleFavoritesList:function(){return S.apply(void 0,arguments)}},e)})(function(e){return r.a.createElement(k.a,{className:"book",title:e.book.title},r.a.createElement(g.a,{className:"title",variant:"h5"},r.a.createElement(c.b,{to:"/book-page/".concat(e.book.id),className:"link"},e.book.title)),r.a.createElement("div",{className:"authors"},e.book.authors.map(function(t,a){return r.a.createElement("div",{key:t},r.a.createElement(c.b,{className:"link",to:"/author-page/".concat(t)},t),a!==e.book.authors.length-1&&",\xa0")})),r.a.createElement(C.a,{className:"button","aria-label":"Add to favorites",onClick:function(){return e.handleFavoritesList(e.book.id)}},e.inFavorites?r.a.createElement(N.a,{className:"star"}):r.a.createElement(R.a,{className:"star -empty"})))}),A=a(83),U=(a(75),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadBooksList()}},{key:"render",value:function(){var e=this.props,t=e.books,a=e.loading,n=e.favorites,o=e.match.params,c=o.type,i=void 0===c?null:c,s=o.genre,l=void 0===s?null:s;return a?r.a.createElement(b,null):r.a.createElement(A.a,{className:"books-list"},t.map(function(e){return!i||"genres"===i&&e.genre===l||"favorites"===i&&n.includes(e.id)?r.a.createElement(j,{key:e.id,inFavorites:n.includes(e.id),book:e}):""}))}}]),t}(r.a.PureComponent));var H=Object(E.b)(function(e){return{books:e.books.items,favorites:e.books.favorites,loading:e.books.loading}},function(e){return Object(O.b)({loadBooksList:function(){return v.apply(void 0,arguments)}},e)})(U),L=a(106),I=a(108),F=a(109);a(76);function P(){return function(e,t){e({type:_.FETCH_AUTHOR_LIST_START});var a=t().books.items;return a.length?w(a)(e):v()(e).then(function(t){return w(t)(e)})}}function w(e){return function(t){return fetch("".concat(T,"/api/authors-list")).then(function(e){return e.json()}).then(function(a){if(a.success){var n=a.data.reduce(function(e,t){return e[t.name]=t,e[t.name].books=[],e},{});return e.forEach(function(e){e.authors.forEach(function(t){n[t].books.push({id:e.id,title:e.title})})}),t({type:_.FETCH_AUTHOR_LIST_SUCCESS,payload:n}),n}throw a.error}).catch(function(e){console.warn(e),t({type:_.FETCH_AUTHOR_LIST_ERROR})})}}function B(e){return function(t,a){var n=a().authors.items[e];n?t({type:_.SET_CURRENT_OPENED_AUTHOR,payload:n}):P()(t,a).then(function(a){n=a[e],t({type:_.SET_CURRENT_OPENED_AUTHOR,payload:n})})}}function D(e,t){return{type:_.EXPAND_AUTHOR_MENU,payload:{name:t,target:e.currentTarget}}}function M(e){return{type:_.CLOSE_AUTHOR_MENU,payload:e}}var K=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadAuthorsList()}},{key:"render",value:function(){var e=this,t=this.props.authors;return console.log(t),this.props.loading?r.a.createElement(b,null):r.a.createElement(A.a,{className:"authors-list"},Object.keys(t).map(function(a){return r.a.createElement("div",{key:a,className:"author"},r.a.createElement(L.a,{className:"button",variant:"contained",onClick:function(t){return e.props.expandAuthorMenu(t,a)}},a),r.a.createElement(I.a,{anchorEl:t[a].opened,keepMounted:!0,open:Boolean(t[a].opened),onClose:function(){return e.props.closeAuthorMenu(a)},className:"authors-list-menu"},r.a.createElement(F.a,{disableGutters:!0,onClose:function(){return e.props.closeAuthorMenu(a)}},r.a.createElement(c.b,{className:"authors-list-menu-link",to:"/author-page/".concat(a)},a," page")),t[a].books&&t[a].books.map(function(t){return r.a.createElement(F.a,{disableGutters:!0,key:t.id,onClose:function(){return e.props.closeAuthorMenu(a)}},r.a.createElement(c.b,{className:"authors-list-menu-link",to:"/book-page/".concat(t.id)},t.title))})))}))}}]),t}(r.a.PureComponent);var x=Object(E.b)(function(e){return{authors:e.authors.items,loading:e.authors.loading}},function(e){return Object(O.b)({loadAuthorsList:function(){return P()},expandAuthorMenu:function(){return D.apply(void 0,arguments)},closeAuthorMenu:function(){return M.apply(void 0,arguments)}},e)})(K),V=(a(77),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.loadBookById(e)}},{key:"render",value:function(){var e=this,t=this.props.current,a=t.id,n=t.title,o=t.authors,i=t.description,s=t.genre;return this.props.loading?r.a.createElement(b,null):r.a.createElement(A.a,{className:"book-page"},r.a.createElement(g.a,{className:"title",variant:"h4",title:n},n),r.a.createElement("div",{className:"authors"},o&&o.map(function(e,t){return r.a.createElement(g.a,{variant:"h6",key:e},r.a.createElement(c.b,{className:"author",to:"/author-page/".concat(e)},e),t!==o.length-1&&",\xa0")})),r.a.createElement(c.b,{to:"/books-list/genres/".concat(s),className:"genre-link"},r.a.createElement(L.a,{variant:"contained",color:"primary"},"Search by this genre (",s,")")),r.a.createElement(C.a,{"aria-label":"Add to favorites",onClick:function(){return e.props.handleFavoritesList(a)}},this.props.favorites.includes(a)?r.a.createElement(N.a,{className:"star"}):r.a.createElement(R.a,{className:"star -empty"})),r.a.createElement("p",{className:"description"},i))}}]),t}(r.a.PureComponent));var J=Object(E.b)(function(e){return{current:e.books.current,favorites:e.books.favorites,loading:e.books.loading}},function(e){return Object(O.b)({loadBookById:function(){return y.apply(void 0,arguments)},handleFavoritesList:function(){return S.apply(void 0,arguments)}},e)})(V),X=(a(78),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.name;this.props.loadAuthorByName(e)}},{key:"render",value:function(){var e=this.props.author;return r.a.createElement(A.a,{className:"author-page"},r.a.createElement(g.a,{className:"title",variant:"h4",title:e.name},e.name),r.a.createElement("p",{className:"bio"},e.bio),r.a.createElement("div",{className:"books"},r.a.createElement(g.a,{variant:"h6"},"Author books: "),e.books&&e.books.map(function(e){return r.a.createElement(c.b,{key:e.id,className:"link",to:"/book-page/".concat(e.id)},e.title)})))}}]),t}(r.a.PureComponent));var G=Object(E.b)(function(e){return{author:e.authors.current}},function(e){return Object(O.b)({loadAuthorByName:function(){return B.apply(void 0,arguments)}},e)})(X),W=(a(79),a(107)),$=function(){return r.a.createElement(A.a,{className:"page-404"},r.a.createElement(g.a,{className:"title",variant:"h4"},"Page not found"),r.a.createElement(c.b,{className:"link",to:"/"},r.a.createElement(L.a,{className:"button",variant:"contained",color:"secondary"},r.a.createElement(W.a,{className:"icon"}),"Return to home page")))},q=(a(80),function(){return r.a.createElement("header",{className:"header"},r.a.createElement(c.c,{className:"item",activeClassName:"-active",to:"/books-list",isActive:function(e,t){return"/"===t.pathname||"/books-list"===t.pathname}},r.a.createElement("p",{className:"text"},"Books list")),r.a.createElement(c.c,{className:"item",exact:!0,activeClassName:"-active",to:"/authors-list"},r.a.createElement("p",{className:"text"},"Authors list")),r.a.createElement(c.c,{className:"item",exact:!0,activeClassName:"-active",to:"/books-list/favorites"},r.a.createElement("p",{className:"text"},"Favorites list")))}),z=(a(81),function(){return r.a.createElement(c.a,null,r.a.createElement("div",{className:"site-wrapper"},r.a.createElement(q,null),r.a.createElement("div",{className:"switch-wrapper"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:H}),r.a.createElement(i.a,{path:"/books-list/:type?/:genre?",component:H}),r.a.createElement(i.a,{path:"/authors-list",component:x}),r.a.createElement(i.a,{path:"/book-page/:id",component:J}),r.a.createElement(i.a,{path:"/author-page/:name",component:G}),r.a.createElement(i.a,{component:$})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=a(57),Y=a(20);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach(function(t){Object(Y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var te={loading:!1,current:{},favorites:[],items:[]};function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach(function(t){Object(Y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var re={loading:!1,current:{},items:{}},oe=Object(O.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.FETCH_BOOKS_LIST_START:return ee({},e,{loading:!0});case _.FETCH_BOOKS_LIST_SUCCESS:return ee({},e,{loading:!1,items:t.payload.items,favorites:t.payload.favorites});case _.FETCH_BOOKS_LIST_ERROR:return ee({},e,{loading:!1});case _.SET_FAVORITES_LIST:return ee({},e,{favorites:t.payload});case _.SET_CURRENT_OPENED_BOOK:return ee({},e,{current:t.payload});default:return e}},authors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.FETCH_AUTHOR_LIST_START:return ne({},e,{loading:!0});case _.FETCH_AUTHOR_LIST_SUCCESS:return ne({},e,{loading:!1,items:t.payload});case _.FETCH_AUTHOR_LIST_ERROR:return ne({},e,{loading:!1});case _.SET_CURRENT_OPENED_AUTHOR:return ne({},e,{current:t.payload});case _.EXPAND_AUTHOR_MENU:return ne({},e,{items:ne({},e.items,Object(Y.a)({},t.payload.name,ne({},e.items[t.payload.name],{opened:t.payload.target})))});case _.CLOSE_AUTHOR_MENU:return ne({},e,{items:ne({},e.items,Object(Y.a)({},t.payload,ne({},e.items[t.payload],{opened:null})))});default:return e}}});var ce,ie=Object(O.d)(oe,ce,Object(O.a)(Q.a));Object(o.render)(r.a.createElement(E.a,{store:ie},r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[62,1,2]]]);
//# sourceMappingURL=main.1878a6be.chunk.js.map